import{g as p}from"./2.27b8d091.js";import{a as u}from"./leaflet-src.8d4391d8.js";function _(l,o){for(var t=0;t<o.length;t++){const e=o[t];if(typeof e!="string"&&!Array.isArray(e)){for(const i in e)if(i!=="default"&&!(i in l)){const n=Object.getOwnPropertyDescriptor(e,i);n&&Object.defineProperty(l,i,n.get?n:{enumerable:!0,get:()=>e[i]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}var c={exports:{}};(function(l){(function(o){l.exports=o(u)})(function(o){return o.Control.Search=o.Control.extend({includes:o.version[0]==="1"?o.Evented.prototype:o.Mixin.Events,options:{url:"",layer:null,sourceData:null,jsonpParam:null,propertyLoc:"loc",propertyName:"title",formatData:null,filterData:null,moveToLocation:null,buildTip:null,container:"",zoom:null,minLength:1,initial:!0,casesensitive:!1,autoType:!0,delayType:400,tooltipLimit:-1,tipAutoSubmit:!0,firstTipSubmit:!1,autoResize:!0,collapsed:!0,autoCollapse:!1,autoCollapseTime:1200,textErr:"Location not found",textCancel:"Cancel",textPlaceholder:"Search...",hideMarkerOnCollapse:!1,position:"topleft",marker:{icon:!1,animate:!0,circle:{radius:10,weight:3,color:"#e03",stroke:!0,fill:!1}}},_getPath:function(t,n){var i=n.split("."),n=i.pop(),s=i.length;let r=i[0],a=1;if(0<s)for(;(t=t[r])&&a<s;)r=i[a++];if(t)return t[n]},_isObject:function(t){return Object.prototype.toString.call(t)==="[object Object]"},initialize:function(t){o.Util.setOptions(this,t||{}),this._inputMinSize=this.options.textPlaceholder?this.options.textPlaceholder.length:10,this._layer=this.options.layer||new o.LayerGroup,this._filterData=this.options.filterData||this._defaultFilterData,this._formatData=this.options.formatData||this._defaultFormatData,this._moveToLocation=this.options.moveToLocation||this._defaultMoveToLocation,this._autoTypeTmp=this.options.autoType,this._countertips=0,this._recordsCache={},this._curReq=null},onAdd:function(t){return this._map=t,this._container=o.DomUtil.create("div","leaflet-control-search"),this._input=this._createInput(this.options.textPlaceholder,"search-input"),this._tooltip=this._createTooltip("search-tooltip"),this._cancel=this._createCancel(this.options.textCancel,"search-cancel"),this._button=this._createButton(this.options.textPlaceholder,"search-button"),this._alert=this._createAlert("search-alert"),this.options.collapsed===!1&&this.expand(this.options.collapsed),this.options.marker&&(this.options.marker instanceof o.Marker||this.options.marker instanceof o.CircleMarker?this._markerSearch=this.options.marker:this._isObject(this.options.marker)&&(this._markerSearch=new o.Control.Search.Marker([0,0],this.options.marker)),this._markerSearch._isMarkerSearch=!0),this.setLayer(this._layer),t.on({resize:this._handleAutoresize},this),this._container},addTo:function(t){return this.options.container?(this._container=this.onAdd(t),this._wrapper=o.DomUtil.get(this.options.container),this._wrapper.style.position="relative",this._wrapper.appendChild(this._container)):o.Control.prototype.addTo.call(this,t),this},onRemove:function(t){this._recordsCache={},t.off({resize:this._handleAutoresize},this)},setLayer:function(t){return this._layer=t,this._layer.addTo(this._map),this},showAlert:function(t){const e=this;return t=t||this.options.textErr,this._alert.style.display="block",this._alert.innerHTML=t,clearTimeout(this.timerAlert),this.timerAlert=setTimeout(function(){e.hideAlert()},this.options.autoCollapseTime),this},hideAlert:function(){return this._alert.style.display="none",this},cancel:function(){return this._input.value="",this._handleKeypress({keyCode:8}),this._input.size=this._inputMinSize,this._input.focus(),this._cancel.style.display="none",this._hideTooltip(),this.fire("search:cancel"),this},expand:function(t){return t=typeof t!="boolean"||t,this._input.style.display="block",o.DomUtil.addClass(this._container,"search-exp"),t!==!1&&(this._input.focus(),this._map.on("dragstart click",this.collapse,this)),this.fire("search:expanded"),this},collapse:function(){return this._hideTooltip(),this.cancel(),this._alert.style.display="none",this._input.blur(),this.options.collapsed&&(this._input.style.display="none",this._cancel.style.display="none",o.DomUtil.removeClass(this._container,"search-exp"),this.options.hideMarkerOnCollapse&&this._map.removeLayer(this._markerSearch),this._map.off("dragstart click",this.collapse,this)),this.fire("search:collapsed"),this},collapseDelayed:function(){const t=this;return this.options.autoCollapse&&(clearTimeout(this.timerCollapse),this.timerCollapse=setTimeout(function(){t.collapse()},this.options.autoCollapseTime)),this},collapseDelayedStop:function(){return clearTimeout(this.timerCollapse),this},_createAlert:function(t){return t=o.DomUtil.create("div",t,this._container),t.style.display="none",o.DomEvent.on(t,"click",o.DomEvent.stop,this).on(t,"click",this.hideAlert,this),t},_createInput:function(t,s){const i=this;var n=o.DomUtil.create("label",s,this._container),s=o.DomUtil.create("input",s,this._container);return s.type="text",s.size=this._inputMinSize,s.value="",s.autocomplete="off",s.autocorrect="off",s.autocapitalize="off",s.placeholder=t,s.style.display="none",s.role="search",s.id=s.role+s.type+s.size,n.htmlFor=s.id,n.style.display="none",n.value=t,o.DomEvent.disableClickPropagation(s).on(s,"keyup",this._handleKeypress,this).on(s,"paste",function(r){setTimeout(function(a){i._handleKeypress(a)},10,r)},this).on(s,"blur",this.collapseDelayed,this).on(s,"focus",this.collapseDelayedStop,this),s},_createCancel:function(t,e){return e=o.DomUtil.create("a",e,this._container),e.href="#",e.title=t,e.style.display="none",e.innerHTML="<span>&otimes;</span>",o.DomEvent.on(e,"click",o.DomEvent.stop,this).on(e,"click",this.cancel,this),e},_createButton:function(t,e){return e=o.DomUtil.create("a",e,this._container),e.href="#",e.title=t,o.DomEvent.on(e,"click",o.DomEvent.stop,this).on(e,"click",this._handleSubmit,this).on(e,"focus",this.collapseDelayedStop,this).on(e,"blur",this.collapseDelayed,this),e},_createTooltip:function(t){const e=this;return t=o.DomUtil.create("ul",t,this._container),t.style.display="none",o.DomEvent.disableClickPropagation(t).on(t,"blur",this.collapseDelayed,this).on(t,"wheel",function(i){e.collapseDelayedStop(),o.DomEvent.stopPropagation(i)},this).on(t,"mouseover",function(i){e.collapseDelayedStop()},this),t},_createTip:function(t,e){let i;return this.options.buildTip?typeof(i=this.options.buildTip.call(this,t,e))=="string"&&((e=o.DomUtil.create("div")).innerHTML=i,i=e.firstChild):(i=o.DomUtil.create("li","")).innerHTML=t,o.DomUtil.addClass(i,"search-tip"),i._text=t,this.options.tipAutoSubmit&&o.DomEvent.disableClickPropagation(i).on(i,"click",o.DomEvent.stop,this).on(i,"click",function(n){this._input.value=t,this._handleAutoresize(),this._input.focus(),this._hideTooltip(),this._handleSubmit()},this),i},_getUrl:function(t){return typeof this.options.url=="function"?this.options.url(t):this.options.url},_defaultFilterData:function(t,e){var i={};if((t=t.replace(new RegExp("[.*+?^${}()|[]\\]","g"),""))==="")return[];var n=this.options.initial?"^":"",s=this.options.casesensitive?void 0:"i",r=new RegExp(n+t,s);for(const a in e)r.test(a)&&(i[a]=e[a]);return i},showTooltip:function(t){if(this._countertips=0,this._tooltip.innerHTML="",this._tooltip.currentSelection=-1,this.options.tooltipLimit)for(const e in t){if(this._countertips===this.options.tooltipLimit)break;this._countertips++,this._tooltip.appendChild(this._createTip(e,t[e]))}return 0<this._countertips?(this._tooltip.style.display="block",this._autoTypeTmp&&this._autoType(),this._autoTypeTmp=this.options.autoType):this._hideTooltip(),this._tooltip.scrollTop=0,this._countertips},_hideTooltip:function(){return this._tooltip.style.display="none",this._tooltip.innerHTML="",0},_defaultFormatData:function(t){var e=this,i=this.options.propertyName,n=this.options.propertyLoc,s={};if(o.Util.isArray(n))for(const r in t)s[e._getPath(t[r],i)]=o.latLng(e._getPath(t[r],n[0]),e._getPath(t[r],n[1]));else for(const r in t)s[e._getPath(t[r],i)]=o.latLng(e._getPath(t[r],n));return s},_recordsFromJsonp:function(t,e){o.Control.Search.callJsonp=e;const i=o.DomUtil.create("script","leaflet-search-jsonp",document.getElementsByTagName("body")[0]);return e=o.Util.template(this._getUrl(t)+"&"+this.options.jsonpParam+"=L.Control.Search.callJsonp",{s:t}),i.type="text/javascript",i.src=e,{abort:function(){i.parentNode.removeChild(i)}}},_recordsFromAjax:function(t,e){let i;try{i=new window.XMLHttpRequest}catch{throw new Error("XMLHttpRequest is not supported")}return t=o.Util.template(this._getUrl(t),{s:t}),i.open("GET",t),i.onload=function(){e(JSON.parse(i.responseText))},i.onreadystatechange=function(){i.readyState===4&&i.status===200&&this.onload()},i.send(),i},_searchInLayer:function(t,e,i){const n=this;let s;t instanceof o.Control.Search.Marker||(t instanceof o.Marker||t instanceof o.CircleMarker?n._getPath(t.options,i)?((s=t.getLatLng()).layer=t,e[n._getPath(t.options,i)]=s):n._getPath(t.feature.properties,i)&&((s=t.getLatLng()).layer=t,e[n._getPath(t.feature.properties,i)]=s):t instanceof o.Path||t instanceof o.Polyline||t instanceof o.Polygon?n._getPath(t.options,i)?((s=t.getBounds().getCenter()).layer=t,e[n._getPath(t.options,i)]=s):n._getPath(t.feature.properties,i)&&((s=t.getBounds().getCenter()).layer=t,e[n._getPath(t.feature.properties,i)]=s):Object.prototype.hasOwnProperty.call(t,"feature")?Object.prototype.hasOwnProperty.call(t.feature.properties,i)&&(t.getLatLng&&typeof t.getLatLng=="function"?((s=t.getLatLng()).layer=t,e[t.feature.properties[i]]=s):t.getBounds&&typeof t.getBounds=="function"&&((s=t.getBounds().getCenter()).layer=t,e[t.feature.properties[i]]=s)):t instanceof o.LayerGroup&&t.eachLayer(function(r){n._searchInLayer(r,e,i)}))},_recordsFromLayer:function(){const t=this,e={},i=this.options.propertyName;return this._layer.eachLayer(function(n){t._searchInLayer(n,e,i)}),e},_autoType:function(){var t=this._input.value.length,e=this._tooltip.firstChild?this._tooltip.firstChild._text:"",i=e.length;e.indexOf(this._input.value)===0&&(this._input.value=e,this._handleAutoresize(),this._input.createTextRange?((e=this._input.createTextRange()).collapse(!0),e.moveStart("character",t),e.moveEnd("character",i),e.select()):this._input.setSelectionRange?this._input.setSelectionRange(t,i):this._input.selectionStart&&(this._input.selectionStart=t,this._input.selectionEnd=i))},_hideAutoType:function(){let t;var e;(t=this._input.selection)&&t.empty?t.empty():this._input.createTextRange?((t=this._input.createTextRange()).collapse(!0),e=this._input.value.length,t.moveStart("character",e),t.moveEnd("character",e),t.select()):(this._input.getSelection&&this._input.getSelection().removeAllRanges(),this._input.selectionStart=this._input.selectionEnd)},_handleKeypress:function(t){const e=this;switch(t.keyCode){case 27:this.collapse();break;case 13:(this._countertips===1||this.options.firstTipSubmit&&0<this._countertips)&&this._tooltip.currentSelection===-1&&this._handleArrowSelect(1),this._handleSubmit();break;case 38:this._handleArrowSelect(-1);break;case 40:this._handleArrowSelect(1);break;case 45:case 46:this._autoTypeTmp=!1;break;case 37:case 39:case 16:case 17:case 35:case 36:break;default:this._input.value.length?this._cancel.style.display="block":this._cancel.style.display="none",this._input.value.length>=this.options.minLength?(clearTimeout(this.timerKeypress),this.timerKeypress=setTimeout(function(){e._fillRecordsCache()},this.options.delayType)):this._hideTooltip()}this._handleAutoresize()},searchText:function(t){var e=t.charCodeAt(t.length);this._input.value=t,this._input.style.display="block",o.DomUtil.addClass(this._container,"search-exp"),this._autoTypeTmp=!1,this._handleKeypress({keyCode:e})},_fillRecordsCache:function(){const t=this;var e=this._input.value;let i;this._curReq&&this._curReq.abort&&this._curReq.abort(),o.DomUtil.addClass(this._container,"search-load"),this.options.layer?(this._recordsCache=this._recordsFromLayer(),i=this._filterData(this._input.value,this._recordsCache),this.showTooltip(i),o.DomUtil.removeClass(this._container,"search-load")):(this.options.sourceData?this._retrieveData=this.options.sourceData:this.options.url&&(this._retrieveData=this.options.jsonpParam?this._recordsFromJsonp:this._recordsFromAjax),this._curReq=this._retrieveData(this,e,function(n){t._recordsCache=t._formatData(t,n),i=t.options.sourceData?t._filterData(t._input.value,t._recordsCache):t._recordsCache,t.showTooltip(i),o.DomUtil.removeClass(t._container,"search-load")}))},_handleAutoresize:function(){var t;this._input.style.maxWidth!==this._map._container.offsetWidth&&(t=this._map._container.clientWidth,this._input.style.maxWidth=(t-=83).toString()+"px"),this.options.autoResize&&this._container.offsetWidth+20<this._map._container.offsetWidth&&(this._input.size=this._input.value.length<this._inputMinSize?this._inputMinSize:this._input.value.length)},_handleArrowSelect:function(t){var e=this._tooltip.hasChildNodes()?this._tooltip.childNodes:[];for(let i=0;i<e.length;i++)o.DomUtil.removeClass(e[i],"search-tip-select");t===1&&this._tooltip.currentSelection>=e.length-1?o.DomUtil.addClass(e[this._tooltip.currentSelection],"search-tip-select"):t===-1&&this._tooltip.currentSelection<=0?this._tooltip.currentSelection=-1:this._tooltip.style.display!=="none"&&(this._tooltip.currentSelection+=t,o.DomUtil.addClass(e[this._tooltip.currentSelection],"search-tip-select"),this._input.value=e[this._tooltip.currentSelection]._text,(t=e[this._tooltip.currentSelection].offsetTop)+e[this._tooltip.currentSelection].clientHeight>=this._tooltip.scrollTop+this._tooltip.clientHeight?this._tooltip.scrollTop=t-this._tooltip.clientHeight+e[this._tooltip.currentSelection].clientHeight:t<=this._tooltip.scrollTop&&(this._tooltip.scrollTop=t))},_handleSubmit:function(){var t;this._hideAutoType(),this.hideAlert(),this._hideTooltip(),this._input.style.display==="none"?this.expand():this._input.value===""?this.collapse():(t=this._getLocation(this._input.value))?(this.showLocation(t,this._input.value),this.fire("search:locationfound",{latlng:t,text:this._input.value,layer:t.layer||null})):this.showAlert()},_getLocation:function(t){return!!Object.prototype.hasOwnProperty.call(this._recordsCache,t)&&this._recordsCache[t]},_defaultMoveToLocation:function(t,e,i){this.options.zoom?this._map.setView(t,this.options.zoom):this._map.panTo(t)},showLocation:function(t,e){const i=this;return i._map.once("moveend zoomend",function(n){i._markerSearch&&i._markerSearch.addTo(i._map).setLatLng(t)}),i._moveToLocation(t,e,i._map),i.options.autoCollapse&&i.collapse(),i}}),o.Control.Search.Marker=o.Marker.extend({includes:o.version[0]==="1"?o.Evented.prototype:o.Mixin.Events,options:{icon:new o.Icon.Default,animate:!0,circle:{radius:10,weight:3,color:"#e03",stroke:!0,fill:!1}},initialize:function(t,e){o.setOptions(this,e),e.icon===!0&&(e.icon=new o.Icon.Default),o.Marker.prototype.initialize.call(this,t,e),o.Control.Search.prototype._isObject(this.options.circle)&&(this._circleLoc=new o.CircleMarker(t,this.options.circle))},onAdd:function(t){o.Marker.prototype.onAdd.call(this,t),this._circleLoc&&(t.addLayer(this._circleLoc),this.options.animate)&&this.animate()},onRemove:function(t){o.Marker.prototype.onRemove.call(this,t),this._circleLoc&&t.removeLayer(this._circleLoc)},setLatLng:function(t){return o.Marker.prototype.setLatLng.call(this,t),this._circleLoc&&this._circleLoc.setLatLng(t),this},_initIcon:function(){this.options.icon&&o.Marker.prototype._initIcon.call(this)},_removeIcon:function(){this.options.icon&&o.Marker.prototype._removeIcon.call(this)},animate:function(){if(this._circleLoc){const t=this._circleLoc;let e=parseInt(t._radius/5);const i=this.options.circle.radius;let n=2*t._radius,s=0;t._timerAnimLoc=setInterval(function(){s+=.5,e+=s,n-=e,t.setRadius(n),n<i&&(clearInterval(t._timerAnimLoc),t.setRadius(i))},200)}return this}}),o.Map.addInitHook(function(){this.options.searchControl&&(this.searchControl=o.control.search(this.options.searchControl),this.addControl(this.searchControl))}),o.control.search=function(t){return new o.Control.Search(t)},o.Control.Search})})(c);var h=c.exports;const d=p(h),y=_({__proto__:null,default:d},[h]);export{y as l};
